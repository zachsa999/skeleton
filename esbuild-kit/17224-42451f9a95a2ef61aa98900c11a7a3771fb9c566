{"code":"(()=>{\n\"use strict\";var __defProp=Object.defineProperty;var __name=(target,value)=>__defProp(target,\"name\",{value,configurable:true});Object.defineProperty(exports,\"__esModule\",{value:true});const stream_1=require(\"stream\");const fsStat=require(\"@nodelib/fs.stat\");const fsWalk=require(\"@nodelib/fs.walk\");const reader_1=require(\"./reader\");class ReaderStream extends reader_1.default{constructor(){super(...arguments);this._walkStream=fsWalk.walkStream;this._stat=fsStat.stat}dynamic(root,options){return this._walkStream(root,options)}static(patterns,options){const filepaths=patterns.map(this._getFullEntryPath,this);const stream=new stream_1.PassThrough({objectMode:true});stream._write=(index,_enc,done)=>{return this._getEntry(filepaths[index],patterns[index],options).then(entry=>{if(entry!==null&&options.entryFilter(entry)){stream.push(entry)}if(index===filepaths.length-1){stream.end()}done()}).catch(done)};for(let i=0;i<filepaths.length;i++){stream.write(i)}return stream}_getEntry(filepath,pattern,options){return this._getStat(filepath).then(stats=>this._makeEntry(stats,pattern)).catch(error=>{if(options.errorFilter(error)){return null}throw error})}_getStat(filepath){return new Promise((resolve,reject)=>{this._stat(filepath,this._fsStatSettings,(error,stats)=>{return error===null?resolve(stats):reject(error)})})}}__name(ReaderStream,\"ReaderStream\");exports.default=ReaderStream;\n})()\n","warnings":[],"map":{"version":3,"mappings":";+HACA,OAAO,eAAe,QAAS,aAAc,CAAE,MAAO,IAAK,CAAC,EAC5D,MAAM,SAAW,QAAQ,QAAQ,EACjC,MAAM,OAAS,QAAQ,kBAAkB,EACzC,MAAM,OAAS,QAAQ,kBAAkB,EACzC,MAAM,SAAW,QAAQ,UAAU,EACnC,MAAM,qBAAqB,SAAS,OAAQ,CACxC,aAAc,CACV,MAAM,GAAG,SAAS,EAClB,KAAK,YAAc,OAAO,WAC1B,KAAK,MAAQ,OAAO,IACxB,CACA,QAAQ,KAAM,QAAS,CACnB,OAAO,KAAK,YAAY,KAAM,OAAO,CACzC,CACA,OAAO,SAAU,QAAS,CACtB,MAAM,UAAY,SAAS,IAAI,KAAK,kBAAmB,IAAI,EAC3D,MAAM,OAAS,IAAI,SAAS,YAAY,CAAE,WAAY,IAAK,CAAC,EAC5D,OAAO,OAAS,CAAC,MAAO,KAAM,OAAS,CACnC,OAAO,KAAK,UAAU,UAAU,KAAK,EAAG,SAAS,KAAK,EAAG,OAAO,EAC3D,KAAM,OAAU,CACjB,GAAI,QAAU,MAAQ,QAAQ,YAAY,KAAK,EAAG,CAC9C,OAAO,KAAK,KAAK,CACrB,CACA,GAAI,QAAU,UAAU,OAAS,EAAG,CAChC,OAAO,IAAI,CACf,CACA,KAAK,CACT,CAAC,EACI,MAAM,IAAI,CACnB,EACA,QAAS,EAAI,EAAG,EAAI,UAAU,OAAQ,IAAK,CACvC,OAAO,MAAM,CAAC,CAClB,CACA,OAAO,MACX,CACA,UAAU,SAAU,QAAS,QAAS,CAClC,OAAO,KAAK,SAAS,QAAQ,EACxB,KAAM,OAAU,KAAK,WAAW,MAAO,OAAO,CAAC,EAC/C,MAAO,OAAU,CAClB,GAAI,QAAQ,YAAY,KAAK,EAAG,CAC5B,OAAO,IACX,CACA,MAAM,KACV,CAAC,CACL,CACA,SAAS,SAAU,CACf,OAAO,IAAI,QAAQ,CAAC,QAAS,SAAW,CACpC,KAAK,MAAM,SAAU,KAAK,gBAAiB,CAAC,MAAO,QAAU,CACzD,OAAO,QAAU,KAAO,QAAQ,KAAK,EAAI,OAAO,KAAK,CACzD,CAAC,CACL,CAAC,CACL,CACJ,CA/CM,oCAgDN,QAAQ,QAAU","names":[],"sources":["/root/projects/zachw-i/packages/plugin/node_modules/.pnpm/fast-glob@3.2.12/node_modules/fast-glob/out/readers/stream.js"],"sourcesContent":["\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst stream_1 = require(\"stream\");\r\nconst fsStat = require(\"@nodelib/fs.stat\");\r\nconst fsWalk = require(\"@nodelib/fs.walk\");\r\nconst reader_1 = require(\"./reader\");\r\nclass ReaderStream extends reader_1.default {\r\n    constructor() {\r\n        super(...arguments);\r\n        this._walkStream = fsWalk.walkStream;\r\n        this._stat = fsStat.stat;\r\n    }\r\n    dynamic(root, options) {\r\n        return this._walkStream(root, options);\r\n    }\r\n    static(patterns, options) {\r\n        const filepaths = patterns.map(this._getFullEntryPath, this);\r\n        const stream = new stream_1.PassThrough({ objectMode: true });\r\n        stream._write = (index, _enc, done) => {\r\n            return this._getEntry(filepaths[index], patterns[index], options)\r\n                .then((entry) => {\r\n                if (entry !== null && options.entryFilter(entry)) {\r\n                    stream.push(entry);\r\n                }\r\n                if (index === filepaths.length - 1) {\r\n                    stream.end();\r\n                }\r\n                done();\r\n            })\r\n                .catch(done);\r\n        };\r\n        for (let i = 0; i < filepaths.length; i++) {\r\n            stream.write(i);\r\n        }\r\n        return stream;\r\n    }\r\n    _getEntry(filepath, pattern, options) {\r\n        return this._getStat(filepath)\r\n            .then((stats) => this._makeEntry(stats, pattern))\r\n            .catch((error) => {\r\n            if (options.errorFilter(error)) {\r\n                return null;\r\n            }\r\n            throw error;\r\n        });\r\n    }\r\n    _getStat(filepath) {\r\n        return new Promise((resolve, reject) => {\r\n            this._stat(filepath, this._fsStatSettings, (error, stats) => {\r\n                return error === null ? resolve(stats) : reject(error);\r\n            });\r\n        });\r\n    }\r\n}\r\nexports.default = ReaderStream;\r\n"]}}