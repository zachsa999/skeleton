{"code":"(()=>{\n\"use strict\";var __defProp=Object.defineProperty;var __name=(target,value)=>__defProp(target,\"name\",{value,configurable:true});Object.defineProperty(exports,\"__esModule\",{value:true});const stream_1=require(\"stream\");const stream_2=require(\"../readers/stream\");const provider_1=require(\"./provider\");class ProviderStream extends provider_1.default{constructor(){super(...arguments);this._reader=new stream_2.default(this._settings)}read(task){const root=this._getRootDirectory(task);const options=this._getReaderOptions(task);const source=this.api(root,task,options);const destination=new stream_1.Readable({objectMode:true,read:()=>{}});source.once(\"error\",error=>destination.emit(\"error\",error)).on(\"data\",entry=>destination.emit(\"data\",options.transform(entry))).once(\"end\",()=>destination.emit(\"end\"));destination.once(\"close\",()=>source.destroy());return destination}api(root,task,options){if(task.dynamic){return this._reader.dynamic(root,options)}return this._reader.static(task.patterns,options)}}__name(ProviderStream,\"ProviderStream\");exports.default=ProviderStream;\n})()\n","warnings":[],"map":{"version":3,"mappings":";+HACA,OAAO,eAAe,QAAS,aAAc,CAAE,MAAO,IAAK,CAAC,EAC5D,MAAM,SAAW,QAAQ,QAAQ,EACjC,MAAM,SAAW,QAAQ,mBAAmB,EAC5C,MAAM,WAAa,QAAQ,YAAY,EACvC,MAAM,uBAAuB,WAAW,OAAQ,CAC5C,aAAc,CACV,MAAM,GAAG,SAAS,EAClB,KAAK,QAAU,IAAI,SAAS,QAAQ,KAAK,SAAS,CACtD,CACA,KAAK,KAAM,CACP,MAAM,KAAO,KAAK,kBAAkB,IAAI,EACxC,MAAM,QAAU,KAAK,kBAAkB,IAAI,EAC3C,MAAM,OAAS,KAAK,IAAI,KAAM,KAAM,OAAO,EAC3C,MAAM,YAAc,IAAI,SAAS,SAAS,CAAE,WAAY,KAAM,KAAM,IAAM,CAAE,CAAE,CAAC,EAC/E,OACK,KAAK,QAAU,OAAU,YAAY,KAAK,QAAS,KAAK,CAAC,EACzD,GAAG,OAAS,OAAU,YAAY,KAAK,OAAQ,QAAQ,UAAU,KAAK,CAAC,CAAC,EACxE,KAAK,MAAO,IAAM,YAAY,KAAK,KAAK,CAAC,EAC9C,YACK,KAAK,QAAS,IAAM,OAAO,QAAQ,CAAC,EACzC,OAAO,WACX,CACA,IAAI,KAAM,KAAM,QAAS,CACrB,GAAI,KAAK,QAAS,CACd,OAAO,KAAK,QAAQ,QAAQ,KAAM,OAAO,CAC7C,CACA,OAAO,KAAK,QAAQ,OAAO,KAAK,SAAU,OAAO,CACrD,CACJ,CAxBM,wCAyBN,QAAQ,QAAU","names":[],"sources":["/root/projects/zachw-i/packages/plugin/node_modules/.pnpm/fast-glob@3.2.12/node_modules/fast-glob/out/providers/stream.js"],"sourcesContent":["\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst stream_1 = require(\"stream\");\r\nconst stream_2 = require(\"../readers/stream\");\r\nconst provider_1 = require(\"./provider\");\r\nclass ProviderStream extends provider_1.default {\r\n    constructor() {\r\n        super(...arguments);\r\n        this._reader = new stream_2.default(this._settings);\r\n    }\r\n    read(task) {\r\n        const root = this._getRootDirectory(task);\r\n        const options = this._getReaderOptions(task);\r\n        const source = this.api(root, task, options);\r\n        const destination = new stream_1.Readable({ objectMode: true, read: () => { } });\r\n        source\r\n            .once('error', (error) => destination.emit('error', error))\r\n            .on('data', (entry) => destination.emit('data', options.transform(entry)))\r\n            .once('end', () => destination.emit('end'));\r\n        destination\r\n            .once('close', () => source.destroy());\r\n        return destination;\r\n    }\r\n    api(root, task, options) {\r\n        if (task.dynamic) {\r\n            return this._reader.dynamic(root, options);\r\n        }\r\n        return this._reader.static(task.patterns, options);\r\n    }\r\n}\r\nexports.default = ProviderStream;\r\n"]}}