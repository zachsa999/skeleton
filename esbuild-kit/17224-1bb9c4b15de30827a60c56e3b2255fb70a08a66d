{"code":"(()=>{\n\"use strict\";var __defProp=Object.defineProperty;var __name=(target,value)=>__defProp(target,\"name\",{value,configurable:true});var __extends=exports&&exports.__extends||function(){var extendStatics=__name(function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)if(b2.hasOwnProperty(p))d2[p]=b2[p]};return extendStatics(d,b)},\"extendStatics\");return function(d,b){extendStatics(d,b);function __(){this.constructor=d}__name(__,\"__\");d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,\"__esModule\",{value:true});exports.basicTypes=exports.BasicType=exports.TParamList=exports.TParam=exports.param=exports.TFunc=exports.func=exports.TProp=exports.TOptional=exports.opt=exports.TIface=exports.iface=exports.TEnumLiteral=exports.enumlit=exports.TEnumType=exports.enumtype=exports.TIntersection=exports.intersection=exports.TUnion=exports.union=exports.TTuple=exports.tuple=exports.TArray=exports.array=exports.TLiteral=exports.lit=exports.TName=exports.name=exports.TType=void 0;var util_1=require(\"./util\");var TType=function(){function TType2(){}__name(TType2,\"TType\");return TType2}();exports.TType=TType;function parseSpec(typeSpec){return typeof typeSpec===\"string\"?name(typeSpec):typeSpec}__name(parseSpec,\"parseSpec\");function getNamedType(suite,name2){var ttype=suite[name2];if(!ttype){throw new Error(\"Unknown type \"+name2)}return ttype}__name(getNamedType,\"getNamedType\");function name(value){return new TName(value)}__name(name,\"name\");exports.name=name;var TName=function(_super){__extends(TName2,_super);function TName2(name2){var _this=_super.call(this)||this;_this.name=name2;_this._failMsg=\"is not a \"+name2;return _this}__name(TName2,\"TName\");TName2.prototype.getChecker=function(suite,strict,allowedProps){var _this=this;var ttype=getNamedType(suite,this.name);var checker=ttype.getChecker(suite,strict,allowedProps);if(ttype instanceof BasicType||ttype instanceof TName2){return checker}return function(value,ctx){return checker(value,ctx)?true:ctx.fail(null,_this._failMsg,0)}};return TName2}(TType);exports.TName=TName;function lit(value){return new TLiteral(value)}__name(lit,\"lit\");exports.lit=lit;var TLiteral=function(_super){__extends(TLiteral2,_super);function TLiteral2(value){var _this=_super.call(this)||this;_this.value=value;_this.name=JSON.stringify(value);_this._failMsg=\"is not \"+_this.name;return _this}__name(TLiteral2,\"TLiteral\");TLiteral2.prototype.getChecker=function(suite,strict){var _this=this;return function(value,ctx){return value===_this.value?true:ctx.fail(null,_this._failMsg,-1)}};return TLiteral2}(TType);exports.TLiteral=TLiteral;function array(typeSpec){return new TArray(parseSpec(typeSpec))}__name(array,\"array\");exports.array=array;var TArray=function(_super){__extends(TArray2,_super);function TArray2(ttype){var _this=_super.call(this)||this;_this.ttype=ttype;return _this}__name(TArray2,\"TArray\");TArray2.prototype.getChecker=function(suite,strict){var itemChecker=this.ttype.getChecker(suite,strict);return function(value,ctx){if(!Array.isArray(value)){return ctx.fail(null,\"is not an array\",0)}for(var i=0;i<value.length;i++){var ok=itemChecker(value[i],ctx);if(!ok){return ctx.fail(i,null,1)}}return true}};return TArray2}(TType);exports.TArray=TArray;function tuple(){var typeSpec=[];for(var _i=0;_i<arguments.length;_i++){typeSpec[_i]=arguments[_i]}return new TTuple(typeSpec.map(function(t){return parseSpec(t)}))}__name(tuple,\"tuple\");exports.tuple=tuple;var TTuple=function(_super){__extends(TTuple2,_super);function TTuple2(ttypes){var _this=_super.call(this)||this;_this.ttypes=ttypes;return _this}__name(TTuple2,\"TTuple\");TTuple2.prototype.getChecker=function(suite,strict){var itemCheckers=this.ttypes.map(function(t){return t.getChecker(suite,strict)});var checker=__name(function(value,ctx){if(!Array.isArray(value)){return ctx.fail(null,\"is not an array\",0)}for(var i=0;i<itemCheckers.length;i++){var ok=itemCheckers[i](value[i],ctx);if(!ok){return ctx.fail(i,null,1)}}return true},\"checker\");if(!strict){return checker}return function(value,ctx){if(!checker(value,ctx)){return false}return value.length<=itemCheckers.length?true:ctx.fail(itemCheckers.length,\"is extraneous\",2)}};return TTuple2}(TType);exports.TTuple=TTuple;function union(){var typeSpec=[];for(var _i=0;_i<arguments.length;_i++){typeSpec[_i]=arguments[_i]}return new TUnion(typeSpec.map(function(t){return parseSpec(t)}))}__name(union,\"union\");exports.union=union;var TUnion=function(_super){__extends(TUnion2,_super);function TUnion2(ttypes){var _this=_super.call(this)||this;_this.ttypes=ttypes;var names=ttypes.map(function(t){return t instanceof TName||t instanceof TLiteral?t.name:null}).filter(function(n){return n});var otherTypes=ttypes.length-names.length;if(names.length){if(otherTypes>0){names.push(otherTypes+\" more\")}_this._failMsg=\"is none of \"+names.join(\", \")}else{_this._failMsg=\"is none of \"+otherTypes+\" types\"}return _this}__name(TUnion2,\"TUnion\");TUnion2.prototype.getChecker=function(suite,strict){var _this=this;var itemCheckers=this.ttypes.map(function(t){return t.getChecker(suite,strict)});return function(value,ctx){var ur=ctx.unionResolver();for(var i=0;i<itemCheckers.length;i++){var ok=itemCheckers[i](value,ur.createContext());if(ok){return true}}ctx.resolveUnion(ur);return ctx.fail(null,_this._failMsg,0)}};return TUnion2}(TType);exports.TUnion=TUnion;function intersection(){var typeSpec=[];for(var _i=0;_i<arguments.length;_i++){typeSpec[_i]=arguments[_i]}return new TIntersection(typeSpec.map(function(t){return parseSpec(t)}))}__name(intersection,\"intersection\");exports.intersection=intersection;var TIntersection=function(_super){__extends(TIntersection2,_super);function TIntersection2(ttypes){var _this=_super.call(this)||this;_this.ttypes=ttypes;return _this}__name(TIntersection2,\"TIntersection\");TIntersection2.prototype.getChecker=function(suite,strict){var allowedProps=new Set;var itemCheckers=this.ttypes.map(function(t){return t.getChecker(suite,strict,allowedProps)});return function(value,ctx){var ok=itemCheckers.every(function(checker){return checker(value,ctx)});if(ok){return true}return ctx.fail(null,null,0)}};return TIntersection2}(TType);exports.TIntersection=TIntersection;function enumtype(values){return new TEnumType(values)}__name(enumtype,\"enumtype\");exports.enumtype=enumtype;var TEnumType=function(_super){__extends(TEnumType2,_super);function TEnumType2(members){var _this=_super.call(this)||this;_this.members=members;_this.validValues=new Set;_this._failMsg=\"is not a valid enum value\";_this.validValues=new Set(Object.keys(members).map(function(name2){return members[name2]}));return _this}__name(TEnumType2,\"TEnumType\");TEnumType2.prototype.getChecker=function(suite,strict){var _this=this;return function(value,ctx){return _this.validValues.has(value)?true:ctx.fail(null,_this._failMsg,0)}};return TEnumType2}(TType);exports.TEnumType=TEnumType;function enumlit(name2,prop){return new TEnumLiteral(name2,prop)}__name(enumlit,\"enumlit\");exports.enumlit=enumlit;var TEnumLiteral=function(_super){__extends(TEnumLiteral2,_super);function TEnumLiteral2(enumName,prop){var _this=_super.call(this)||this;_this.enumName=enumName;_this.prop=prop;_this._failMsg=\"is not \"+enumName+\".\"+prop;return _this}__name(TEnumLiteral2,\"TEnumLiteral\");TEnumLiteral2.prototype.getChecker=function(suite,strict){var _this=this;var ttype=getNamedType(suite,this.enumName);if(!(ttype instanceof TEnumType)){throw new Error(\"Type \"+this.enumName+\" used in enumlit is not an enum type\")}var val=ttype.members[this.prop];if(!ttype.members.hasOwnProperty(this.prop)){throw new Error(\"Unknown value \"+this.enumName+\".\"+this.prop+\" used in enumlit\")}return function(value,ctx){return value===val?true:ctx.fail(null,_this._failMsg,-1)}};return TEnumLiteral2}(TType);exports.TEnumLiteral=TEnumLiteral;function makeIfaceProps(props){return Object.keys(props).map(function(name2){return makeIfaceProp(name2,props[name2])})}__name(makeIfaceProps,\"makeIfaceProps\");function makeIfaceProp(name2,prop){return prop instanceof TOptional?new TProp(name2,prop.ttype,true):new TProp(name2,parseSpec(prop),false)}__name(makeIfaceProp,\"makeIfaceProp\");function iface(bases,props){return new TIface(bases,makeIfaceProps(props))}__name(iface,\"iface\");exports.iface=iface;var TIface=function(_super){__extends(TIface2,_super);function TIface2(bases,props){var _this=_super.call(this)||this;_this.bases=bases;_this.props=props;_this.propSet=new Set(props.map(function(p){return p.name}));return _this}__name(TIface2,\"TIface\");TIface2.prototype.getChecker=function(suite,strict,allowedProps){var _this=this;var baseCheckers=this.bases.map(function(b){return getNamedType(suite,b).getChecker(suite,strict)});var propCheckers=this.props.map(function(prop){return prop.ttype.getChecker(suite,strict)});var testCtx=new util_1.NoopContext;var isPropRequired=this.props.map(function(prop,i){return!prop.isOpt&&!propCheckers[i](void 0,testCtx)});var checker=__name(function(value,ctx){if(typeof value!==\"object\"||value===null){return ctx.fail(null,\"is not an object\",0)}for(var i=0;i<baseCheckers.length;i++){if(!baseCheckers[i](value,ctx)){return false}}for(var i=0;i<propCheckers.length;i++){var name_1=_this.props[i].name;var v=value[name_1];if(v===void 0){if(isPropRequired[i]){return ctx.fail(name_1,\"is missing\",1)}}else{var ok=propCheckers[i](v,ctx);if(!ok){return ctx.fail(name_1,null,1)}}}return true},\"checker\");if(!strict){return checker}var propSet=this.propSet;if(allowedProps){this.propSet.forEach(function(prop){return allowedProps.add(prop)});propSet=allowedProps}return function(value,ctx){if(!checker(value,ctx)){return false}for(var prop in value){if(!propSet.has(prop)){return ctx.fail(prop,\"is extraneous\",2)}}return true}};return TIface2}(TType);exports.TIface=TIface;function opt(typeSpec){return new TOptional(parseSpec(typeSpec))}__name(opt,\"opt\");exports.opt=opt;var TOptional=function(_super){__extends(TOptional2,_super);function TOptional2(ttype){var _this=_super.call(this)||this;_this.ttype=ttype;return _this}__name(TOptional2,\"TOptional\");TOptional2.prototype.getChecker=function(suite,strict){var itemChecker=this.ttype.getChecker(suite,strict);return function(value,ctx){return value===void 0||itemChecker(value,ctx)}};return TOptional2}(TType);exports.TOptional=TOptional;var TProp=function(){function TProp2(name2,ttype,isOpt){this.name=name2;this.ttype=ttype;this.isOpt=isOpt}__name(TProp2,\"TProp\");return TProp2}();exports.TProp=TProp;function func(resultSpec){var params=[];for(var _i=1;_i<arguments.length;_i++){params[_i-1]=arguments[_i]}return new TFunc(new TParamList(params),parseSpec(resultSpec))}__name(func,\"func\");exports.func=func;var TFunc=function(_super){__extends(TFunc2,_super);function TFunc2(paramList,result){var _this=_super.call(this)||this;_this.paramList=paramList;_this.result=result;return _this}__name(TFunc2,\"TFunc\");TFunc2.prototype.getChecker=function(suite,strict){return function(value,ctx){return typeof value===\"function\"?true:ctx.fail(null,\"is not a function\",0)}};return TFunc2}(TType);exports.TFunc=TFunc;function param(name2,typeSpec,isOpt){return new TParam(name2,parseSpec(typeSpec),Boolean(isOpt))}__name(param,\"param\");exports.param=param;var TParam=function(){function TParam2(name2,ttype,isOpt){this.name=name2;this.ttype=ttype;this.isOpt=isOpt}__name(TParam2,\"TParam\");return TParam2}();exports.TParam=TParam;var TParamList=function(_super){__extends(TParamList2,_super);function TParamList2(params){var _this=_super.call(this)||this;_this.params=params;return _this}__name(TParamList2,\"TParamList\");TParamList2.prototype.getChecker=function(suite,strict){var _this=this;var itemCheckers=this.params.map(function(t){return t.ttype.getChecker(suite,strict)});var testCtx=new util_1.NoopContext;var isParamRequired=this.params.map(function(param2,i){return!param2.isOpt&&!itemCheckers[i](void 0,testCtx)});var checker=__name(function(value,ctx){if(!Array.isArray(value)){return ctx.fail(null,\"is not an array\",0)}for(var i=0;i<itemCheckers.length;i++){var p=_this.params[i];if(value[i]===void 0){if(isParamRequired[i]){return ctx.fail(p.name,\"is missing\",1)}}else{var ok=itemCheckers[i](value[i],ctx);if(!ok){return ctx.fail(p.name,null,1)}}}return true},\"checker\");if(!strict){return checker}return function(value,ctx){if(!checker(value,ctx)){return false}return value.length<=itemCheckers.length?true:ctx.fail(itemCheckers.length,\"is extraneous\",2)}};return TParamList2}(TType);exports.TParamList=TParamList;var BasicType=function(_super){__extends(BasicType2,_super);function BasicType2(validator,message){var _this=_super.call(this)||this;_this.validator=validator;_this.message=message;return _this}__name(BasicType2,\"BasicType\");BasicType2.prototype.getChecker=function(suite,strict){var _this=this;return function(value,ctx){return _this.validator(value)?true:ctx.fail(null,_this.message,0)}};return BasicType2}(TType);exports.BasicType=BasicType;exports.basicTypes={any:new BasicType(function(v){return true},\"is invalid\"),number:new BasicType(function(v){return typeof v===\"number\"},\"is not a number\"),object:new BasicType(function(v){return typeof v===\"object\"&&v},\"is not an object\"),boolean:new BasicType(function(v){return typeof v===\"boolean\"},\"is not a boolean\"),string:new BasicType(function(v){return typeof v===\"string\"},\"is not a string\"),symbol:new BasicType(function(v){return typeof v===\"symbol\"},\"is not a symbol\"),void:new BasicType(function(v){return v==null},\"is not void\"),undefined:new BasicType(function(v){return v===void 0},\"is not undefined\"),null:new BasicType(function(v){return v===null},\"is not null\"),never:new BasicType(function(v){return false},\"is unexpected\"),Date:new BasicType(getIsNativeChecker(\"[object Date]\"),\"is not a Date\"),RegExp:new BasicType(getIsNativeChecker(\"[object RegExp]\"),\"is not a RegExp\")};var nativeToString=Object.prototype.toString;function getIsNativeChecker(tag){return function(v){return typeof v===\"object\"&&v&&nativeToString.call(v)===tag}}__name(getIsNativeChecker,\"getIsNativeChecker\");if(typeof Buffer!==\"undefined\"){exports.basicTypes.Buffer=new BasicType(function(v){return Buffer.isBuffer(v)},\"is not a Buffer\")}var _loop_1=__name(function(array_1){exports.basicTypes[array_1.name]=new BasicType(function(v){return v instanceof array_1},\"is not a \"+array_1.name)},\"_loop_1\");for(var _i=0,_a=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,ArrayBuffer];_i<_a.length;_i++){var array_1=_a[_i];_loop_1(array_1)}\n})()\n","warnings":[],"map":{"version":3,"mappings":"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","names":["d","b","TType","name","TName","TLiteral","TArray","TTuple","TUnion","TIntersection","TEnumType","TEnumLiteral","TIface","TOptional","TProp","TFunc","TParam","TParamList","param","BasicType"],"sources":["/root/projects/zachw-i/packages/plugin/node_modules/.pnpm/ts-interface-checker@0.1.13/node_modules/ts-interface-checker/dist/types.js"],"sourcesContent":["\"use strict\";\n/**\n * This module defines nodes used to define types and validations for objects and interfaces.\n */\n// tslint:disable:no-shadowed-variable prefer-for-of\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.basicTypes = exports.BasicType = exports.TParamList = exports.TParam = exports.param = exports.TFunc = exports.func = exports.TProp = exports.TOptional = exports.opt = exports.TIface = exports.iface = exports.TEnumLiteral = exports.enumlit = exports.TEnumType = exports.enumtype = exports.TIntersection = exports.intersection = exports.TUnion = exports.union = exports.TTuple = exports.tuple = exports.TArray = exports.array = exports.TLiteral = exports.lit = exports.TName = exports.name = exports.TType = void 0;\nvar util_1 = require(\"./util\");\n/** Node that represents a type. */\nvar TType = /** @class */ (function () {\n    function TType() {\n    }\n    return TType;\n}());\nexports.TType = TType;\n/** Parses a type spec into a TType node. */\nfunction parseSpec(typeSpec) {\n    return typeof typeSpec === \"string\" ? name(typeSpec) : typeSpec;\n}\nfunction getNamedType(suite, name) {\n    var ttype = suite[name];\n    if (!ttype) {\n        throw new Error(\"Unknown type \" + name);\n    }\n    return ttype;\n}\n/**\n * Defines a type name, either built-in, or defined in this suite. It can typically be included in\n * the specs as just a plain string.\n */\nfunction name(value) { return new TName(value); }\nexports.name = name;\nvar TName = /** @class */ (function (_super) {\n    __extends(TName, _super);\n    function TName(name) {\n        var _this = _super.call(this) || this;\n        _this.name = name;\n        _this._failMsg = \"is not a \" + name;\n        return _this;\n    }\n    TName.prototype.getChecker = function (suite, strict, allowedProps) {\n        var _this = this;\n        var ttype = getNamedType(suite, this.name);\n        var checker = ttype.getChecker(suite, strict, allowedProps);\n        if (ttype instanceof BasicType || ttype instanceof TName) {\n            return checker;\n        }\n        // For complex types, add an additional \"is not a <Type>\" message on failure.\n        return function (value, ctx) { return checker(value, ctx) ? true : ctx.fail(null, _this._failMsg, 0); };\n    };\n    return TName;\n}(TType));\nexports.TName = TName;\n/**\n * Defines a literal value, e.g. lit('hello') or lit(123).\n */\nfunction lit(value) { return new TLiteral(value); }\nexports.lit = lit;\nvar TLiteral = /** @class */ (function (_super) {\n    __extends(TLiteral, _super);\n    function TLiteral(value) {\n        var _this = _super.call(this) || this;\n        _this.value = value;\n        _this.name = JSON.stringify(value);\n        _this._failMsg = \"is not \" + _this.name;\n        return _this;\n    }\n    TLiteral.prototype.getChecker = function (suite, strict) {\n        var _this = this;\n        return function (value, ctx) { return (value === _this.value) ? true : ctx.fail(null, _this._failMsg, -1); };\n    };\n    return TLiteral;\n}(TType));\nexports.TLiteral = TLiteral;\n/**\n * Defines an array type, e.g. array('number').\n */\nfunction array(typeSpec) { return new TArray(parseSpec(typeSpec)); }\nexports.array = array;\nvar TArray = /** @class */ (function (_super) {\n    __extends(TArray, _super);\n    function TArray(ttype) {\n        var _this = _super.call(this) || this;\n        _this.ttype = ttype;\n        return _this;\n    }\n    TArray.prototype.getChecker = function (suite, strict) {\n        var itemChecker = this.ttype.getChecker(suite, strict);\n        return function (value, ctx) {\n            if (!Array.isArray(value)) {\n                return ctx.fail(null, \"is not an array\", 0);\n            }\n            for (var i = 0; i < value.length; i++) {\n                var ok = itemChecker(value[i], ctx);\n                if (!ok) {\n                    return ctx.fail(i, null, 1);\n                }\n            }\n            return true;\n        };\n    };\n    return TArray;\n}(TType));\nexports.TArray = TArray;\n/**\n * Defines a tuple type, e.g. tuple('string', 'number').\n */\nfunction tuple() {\n    var typeSpec = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        typeSpec[_i] = arguments[_i];\n    }\n    return new TTuple(typeSpec.map(function (t) { return parseSpec(t); }));\n}\nexports.tuple = tuple;\nvar TTuple = /** @class */ (function (_super) {\n    __extends(TTuple, _super);\n    function TTuple(ttypes) {\n        var _this = _super.call(this) || this;\n        _this.ttypes = ttypes;\n        return _this;\n    }\n    TTuple.prototype.getChecker = function (suite, strict) {\n        var itemCheckers = this.ttypes.map(function (t) { return t.getChecker(suite, strict); });\n        var checker = function (value, ctx) {\n            if (!Array.isArray(value)) {\n                return ctx.fail(null, \"is not an array\", 0);\n            }\n            for (var i = 0; i < itemCheckers.length; i++) {\n                var ok = itemCheckers[i](value[i], ctx);\n                if (!ok) {\n                    return ctx.fail(i, null, 1);\n                }\n            }\n            return true;\n        };\n        if (!strict) {\n            return checker;\n        }\n        return function (value, ctx) {\n            if (!checker(value, ctx)) {\n                return false;\n            }\n            return value.length <= itemCheckers.length ? true :\n                ctx.fail(itemCheckers.length, \"is extraneous\", 2);\n        };\n    };\n    return TTuple;\n}(TType));\nexports.TTuple = TTuple;\n/**\n * Defines a union type, e.g. union('number', 'null').\n */\nfunction union() {\n    var typeSpec = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        typeSpec[_i] = arguments[_i];\n    }\n    return new TUnion(typeSpec.map(function (t) { return parseSpec(t); }));\n}\nexports.union = union;\nvar TUnion = /** @class */ (function (_super) {\n    __extends(TUnion, _super);\n    function TUnion(ttypes) {\n        var _this = _super.call(this) || this;\n        _this.ttypes = ttypes;\n        var names = ttypes.map(function (t) { return t instanceof TName || t instanceof TLiteral ? t.name : null; })\n            .filter(function (n) { return n; });\n        var otherTypes = ttypes.length - names.length;\n        if (names.length) {\n            if (otherTypes > 0) {\n                names.push(otherTypes + \" more\");\n            }\n            _this._failMsg = \"is none of \" + names.join(\", \");\n        }\n        else {\n            _this._failMsg = \"is none of \" + otherTypes + \" types\";\n        }\n        return _this;\n    }\n    TUnion.prototype.getChecker = function (suite, strict) {\n        var _this = this;\n        var itemCheckers = this.ttypes.map(function (t) { return t.getChecker(suite, strict); });\n        return function (value, ctx) {\n            var ur = ctx.unionResolver();\n            for (var i = 0; i < itemCheckers.length; i++) {\n                var ok = itemCheckers[i](value, ur.createContext());\n                if (ok) {\n                    return true;\n                }\n            }\n            ctx.resolveUnion(ur);\n            return ctx.fail(null, _this._failMsg, 0);\n        };\n    };\n    return TUnion;\n}(TType));\nexports.TUnion = TUnion;\n/**\n * Defines an intersection type, e.g. intersection('number', 'null').\n */\nfunction intersection() {\n    var typeSpec = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        typeSpec[_i] = arguments[_i];\n    }\n    return new TIntersection(typeSpec.map(function (t) { return parseSpec(t); }));\n}\nexports.intersection = intersection;\nvar TIntersection = /** @class */ (function (_super) {\n    __extends(TIntersection, _super);\n    function TIntersection(ttypes) {\n        var _this = _super.call(this) || this;\n        _this.ttypes = ttypes;\n        return _this;\n    }\n    TIntersection.prototype.getChecker = function (suite, strict) {\n        var allowedProps = new Set();\n        var itemCheckers = this.ttypes.map(function (t) { return t.getChecker(suite, strict, allowedProps); });\n        return function (value, ctx) {\n            var ok = itemCheckers.every(function (checker) { return checker(value, ctx); });\n            if (ok) {\n                return true;\n            }\n            return ctx.fail(null, null, 0);\n        };\n    };\n    return TIntersection;\n}(TType));\nexports.TIntersection = TIntersection;\n/**\n * Defines an enum type, e.g. enum({'A': 1, 'B': 2}).\n */\nfunction enumtype(values) {\n    return new TEnumType(values);\n}\nexports.enumtype = enumtype;\nvar TEnumType = /** @class */ (function (_super) {\n    __extends(TEnumType, _super);\n    function TEnumType(members) {\n        var _this = _super.call(this) || this;\n        _this.members = members;\n        _this.validValues = new Set();\n        _this._failMsg = \"is not a valid enum value\";\n        _this.validValues = new Set(Object.keys(members).map(function (name) { return members[name]; }));\n        return _this;\n    }\n    TEnumType.prototype.getChecker = function (suite, strict) {\n        var _this = this;\n        return function (value, ctx) {\n            return (_this.validValues.has(value) ? true : ctx.fail(null, _this._failMsg, 0));\n        };\n    };\n    return TEnumType;\n}(TType));\nexports.TEnumType = TEnumType;\n/**\n * Defines a literal enum value, such as Direction.Up, specified as enumlit(\"Direction\", \"Up\").\n */\nfunction enumlit(name, prop) {\n    return new TEnumLiteral(name, prop);\n}\nexports.enumlit = enumlit;\nvar TEnumLiteral = /** @class */ (function (_super) {\n    __extends(TEnumLiteral, _super);\n    function TEnumLiteral(enumName, prop) {\n        var _this = _super.call(this) || this;\n        _this.enumName = enumName;\n        _this.prop = prop;\n        _this._failMsg = \"is not \" + enumName + \".\" + prop;\n        return _this;\n    }\n    TEnumLiteral.prototype.getChecker = function (suite, strict) {\n        var _this = this;\n        var ttype = getNamedType(suite, this.enumName);\n        if (!(ttype instanceof TEnumType)) {\n            throw new Error(\"Type \" + this.enumName + \" used in enumlit is not an enum type\");\n        }\n        var val = ttype.members[this.prop];\n        if (!ttype.members.hasOwnProperty(this.prop)) {\n            throw new Error(\"Unknown value \" + this.enumName + \".\" + this.prop + \" used in enumlit\");\n        }\n        return function (value, ctx) { return (value === val) ? true : ctx.fail(null, _this._failMsg, -1); };\n    };\n    return TEnumLiteral;\n}(TType));\nexports.TEnumLiteral = TEnumLiteral;\nfunction makeIfaceProps(props) {\n    return Object.keys(props).map(function (name) { return makeIfaceProp(name, props[name]); });\n}\nfunction makeIfaceProp(name, prop) {\n    return prop instanceof TOptional ?\n        new TProp(name, prop.ttype, true) :\n        new TProp(name, parseSpec(prop), false);\n}\n/**\n * Defines an interface. The first argument is an array of interfaces that it extends, and the\n * second is an array of properties.\n */\nfunction iface(bases, props) {\n    return new TIface(bases, makeIfaceProps(props));\n}\nexports.iface = iface;\nvar TIface = /** @class */ (function (_super) {\n    __extends(TIface, _super);\n    function TIface(bases, props) {\n        var _this = _super.call(this) || this;\n        _this.bases = bases;\n        _this.props = props;\n        _this.propSet = new Set(props.map(function (p) { return p.name; }));\n        return _this;\n    }\n    TIface.prototype.getChecker = function (suite, strict, allowedProps) {\n        var _this = this;\n        var baseCheckers = this.bases.map(function (b) { return getNamedType(suite, b).getChecker(suite, strict); });\n        var propCheckers = this.props.map(function (prop) { return prop.ttype.getChecker(suite, strict); });\n        var testCtx = new util_1.NoopContext();\n        // Consider a prop required if it's not optional AND does not allow for undefined as a value.\n        var isPropRequired = this.props.map(function (prop, i) {\n            return !prop.isOpt && !propCheckers[i](undefined, testCtx);\n        });\n        var checker = function (value, ctx) {\n            if (typeof value !== \"object\" || value === null) {\n                return ctx.fail(null, \"is not an object\", 0);\n            }\n            for (var i = 0; i < baseCheckers.length; i++) {\n                if (!baseCheckers[i](value, ctx)) {\n                    return false;\n                }\n            }\n            for (var i = 0; i < propCheckers.length; i++) {\n                var name_1 = _this.props[i].name;\n                var v = value[name_1];\n                if (v === undefined) {\n                    if (isPropRequired[i]) {\n                        return ctx.fail(name_1, \"is missing\", 1);\n                    }\n                }\n                else {\n                    var ok = propCheckers[i](v, ctx);\n                    if (!ok) {\n                        return ctx.fail(name_1, null, 1);\n                    }\n                }\n            }\n            return true;\n        };\n        if (!strict) {\n            return checker;\n        }\n        var propSet = this.propSet;\n        if (allowedProps) {\n            this.propSet.forEach(function (prop) { return allowedProps.add(prop); });\n            propSet = allowedProps;\n        }\n        // In strict mode, check also for unknown enumerable properties.\n        return function (value, ctx) {\n            if (!checker(value, ctx)) {\n                return false;\n            }\n            for (var prop in value) {\n                if (!propSet.has(prop)) {\n                    return ctx.fail(prop, \"is extraneous\", 2);\n                }\n            }\n            return true;\n        };\n    };\n    return TIface;\n}(TType));\nexports.TIface = TIface;\n/**\n * Defines an optional property on an interface.\n */\nfunction opt(typeSpec) { return new TOptional(parseSpec(typeSpec)); }\nexports.opt = opt;\nvar TOptional = /** @class */ (function (_super) {\n    __extends(TOptional, _super);\n    function TOptional(ttype) {\n        var _this = _super.call(this) || this;\n        _this.ttype = ttype;\n        return _this;\n    }\n    TOptional.prototype.getChecker = function (suite, strict) {\n        var itemChecker = this.ttype.getChecker(suite, strict);\n        return function (value, ctx) {\n            return value === undefined || itemChecker(value, ctx);\n        };\n    };\n    return TOptional;\n}(TType));\nexports.TOptional = TOptional;\n/**\n * Defines a property in an interface.\n */\nvar TProp = /** @class */ (function () {\n    function TProp(name, ttype, isOpt) {\n        this.name = name;\n        this.ttype = ttype;\n        this.isOpt = isOpt;\n    }\n    return TProp;\n}());\nexports.TProp = TProp;\n/**\n * Defines a function. The first argument declares the function's return type, the rest declare\n * its parameters.\n */\nfunction func(resultSpec) {\n    var params = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        params[_i - 1] = arguments[_i];\n    }\n    return new TFunc(new TParamList(params), parseSpec(resultSpec));\n}\nexports.func = func;\nvar TFunc = /** @class */ (function (_super) {\n    __extends(TFunc, _super);\n    function TFunc(paramList, result) {\n        var _this = _super.call(this) || this;\n        _this.paramList = paramList;\n        _this.result = result;\n        return _this;\n    }\n    TFunc.prototype.getChecker = function (suite, strict) {\n        return function (value, ctx) {\n            return typeof value === \"function\" ? true : ctx.fail(null, \"is not a function\", 0);\n        };\n    };\n    return TFunc;\n}(TType));\nexports.TFunc = TFunc;\n/**\n * Defines a function parameter.\n */\nfunction param(name, typeSpec, isOpt) {\n    return new TParam(name, parseSpec(typeSpec), Boolean(isOpt));\n}\nexports.param = param;\nvar TParam = /** @class */ (function () {\n    function TParam(name, ttype, isOpt) {\n        this.name = name;\n        this.ttype = ttype;\n        this.isOpt = isOpt;\n    }\n    return TParam;\n}());\nexports.TParam = TParam;\n/**\n * Defines a function parameter list.\n */\nvar TParamList = /** @class */ (function (_super) {\n    __extends(TParamList, _super);\n    function TParamList(params) {\n        var _this = _super.call(this) || this;\n        _this.params = params;\n        return _this;\n    }\n    TParamList.prototype.getChecker = function (suite, strict) {\n        var _this = this;\n        var itemCheckers = this.params.map(function (t) { return t.ttype.getChecker(suite, strict); });\n        var testCtx = new util_1.NoopContext();\n        var isParamRequired = this.params.map(function (param, i) {\n            return !param.isOpt && !itemCheckers[i](undefined, testCtx);\n        });\n        var checker = function (value, ctx) {\n            if (!Array.isArray(value)) {\n                return ctx.fail(null, \"is not an array\", 0);\n            }\n            for (var i = 0; i < itemCheckers.length; i++) {\n                var p = _this.params[i];\n                if (value[i] === undefined) {\n                    if (isParamRequired[i]) {\n                        return ctx.fail(p.name, \"is missing\", 1);\n                    }\n                }\n                else {\n                    var ok = itemCheckers[i](value[i], ctx);\n                    if (!ok) {\n                        return ctx.fail(p.name, null, 1);\n                    }\n                }\n            }\n            return true;\n        };\n        if (!strict) {\n            return checker;\n        }\n        return function (value, ctx) {\n            if (!checker(value, ctx)) {\n                return false;\n            }\n            return value.length <= itemCheckers.length ? true :\n                ctx.fail(itemCheckers.length, \"is extraneous\", 2);\n        };\n    };\n    return TParamList;\n}(TType));\nexports.TParamList = TParamList;\n/**\n * Single TType implementation for all basic built-in types.\n */\nvar BasicType = /** @class */ (function (_super) {\n    __extends(BasicType, _super);\n    function BasicType(validator, message) {\n        var _this = _super.call(this) || this;\n        _this.validator = validator;\n        _this.message = message;\n        return _this;\n    }\n    BasicType.prototype.getChecker = function (suite, strict) {\n        var _this = this;\n        return function (value, ctx) { return _this.validator(value) ? true : ctx.fail(null, _this.message, 0); };\n    };\n    return BasicType;\n}(TType));\nexports.BasicType = BasicType;\n/**\n * Defines the suite of basic types.\n */\nexports.basicTypes = {\n    any: new BasicType(function (v) { return true; }, \"is invalid\"),\n    number: new BasicType(function (v) { return (typeof v === \"number\"); }, \"is not a number\"),\n    object: new BasicType(function (v) { return (typeof v === \"object\" && v); }, \"is not an object\"),\n    boolean: new BasicType(function (v) { return (typeof v === \"boolean\"); }, \"is not a boolean\"),\n    string: new BasicType(function (v) { return (typeof v === \"string\"); }, \"is not a string\"),\n    symbol: new BasicType(function (v) { return (typeof v === \"symbol\"); }, \"is not a symbol\"),\n    void: new BasicType(function (v) { return (v == null); }, \"is not void\"),\n    undefined: new BasicType(function (v) { return (v === undefined); }, \"is not undefined\"),\n    null: new BasicType(function (v) { return (v === null); }, \"is not null\"),\n    never: new BasicType(function (v) { return false; }, \"is unexpected\"),\n    Date: new BasicType(getIsNativeChecker(\"[object Date]\"), \"is not a Date\"),\n    RegExp: new BasicType(getIsNativeChecker(\"[object RegExp]\"), \"is not a RegExp\"),\n};\n// This approach for checking native object types mirrors that of lodash. Its advantage over\n// `isinstance` is that it can still return true for native objects created in different JS\n// execution environments.\nvar nativeToString = Object.prototype.toString;\nfunction getIsNativeChecker(tag) {\n    return function (v) { return typeof v === \"object\" && v && nativeToString.call(v) === tag; };\n}\nif (typeof Buffer !== \"undefined\") {\n    exports.basicTypes.Buffer = new BasicType(function (v) { return Buffer.isBuffer(v); }, \"is not a Buffer\");\n}\nvar _loop_1 = function (array_1) {\n    exports.basicTypes[array_1.name] = new BasicType(function (v) { return (v instanceof array_1); }, \"is not a \" + array_1.name);\n};\n// Support typed arrays of various flavors\nfor (var _i = 0, _a = [Int8Array, Uint8Array, Uint8ClampedArray, Int16Array, Uint16Array,\n    Int32Array, Uint32Array, Float32Array, Float64Array, ArrayBuffer]; _i < _a.length; _i++) {\n    var array_1 = _a[_i];\n    _loop_1(array_1);\n}\n"]}}